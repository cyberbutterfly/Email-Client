(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,n){e.exports=n(249)},249:function(e,t,n){"use strict";n.r(t);var a=n(2),l=n.n(a),i=n(48),r=n.n(i),c=n(120),u=n(121),o=n(135),m=n(122),s=n(137),d=n(35),f=n(13),E=n(44),g=n(45),v=n.n(g);function p(){var e=Object(d.a)(["\n  color: ",";\n  font-weight: ",";\n"]);return p=function(){return e},e}var b=n(129).a.a.attrs(function(e){return{children:e.email.subject}})(p(),function(e){return e.email.isRead?"black":"green"},function(e){return e.email.isRead?"normal":"bold"}),h=function(e){return l.a.createElement(b,Object.assign({href:"#",children:e.email.subject},e))};function y(){var e=Object(d.a)(["\n  mutation setEmailSelect($id: ID!, $isSelected: Boolean!) {\n    setEmailSelect(id: $id, isSelected: $isSelected) @client\n  }\n"]);return y=function(){return e},e}var j=v()(y()),w=function(e){var t=e.email,n=t.id,a=t.isSelected;return l.a.createElement(E.Mutation,{mutation:j,variables:{id:n,isSelected:!a}},function(e){return l.a.createElement(f.i,{type:"checkbox",checked:a,onChange:e})})},S=function(e){var t=e.onChange,n=e.value,a=e.values;return l.a.createElement(f.b,{vertical:!0},a.map(function(e){return l.a.createElement(f.a,{key:e,onClick:function(n){n.preventDefault(),t(e)},color:n===e?"success":"primary"},e)}))};function k(){var e=Object(d.a)(["\n  query emailById($emailId: ID!) {\n    email(id: $emailId) {\n      subject\n      body\n    }\n  }\n"]);return k=function(){return e},e}var O=v()(k()),I=function(e){e.filter;var t=e.emailId,n=e.toggle;return l.a.createElement(E.Query,{query:O,variables:{emailId:t}},function(e){e.client;var a=e.loading,i=e.error,r=e.data;return a?l.a.createElement("p",null,"Loading..."):i?l.a.createElement("p",null,"Error :( ",JSON.stringify(i)):l.a.createElement(f.k,{isOpen:!0},l.a.createElement(f.m,{toggle:n},null!==t&&r.email.subject),l.a.createElement(f.l,null,l.a.createElement(f.c,null,null!==t&&r.email.body)))})},R=function(e){var t=e.page,n=e.pages,a=e.onChange;return l.a.createElement(f.n,{"aria-label":"Email navigation"},l.a.createElement(f.o,{disabled:0===t},l.a.createElement(f.p,{previous:!0,href:"#",onClick:function(){return a({page:t-1})}})),l.a.createElement(f.o,{disabled:!0},l.a.createElement(f.p,null,t+1)),l.a.createElement(f.o,{disabled:t>=n-1},l.a.createElement(f.p,{next:!0,href:"#",onClick:function(){return a({page:t+1})}})))};function L(){var e=Object(d.a)(["\n  query emails($filter: String!) {\n    emails(filter: $filter) {\n      id\n      subject\n      isRead\n      isSelected @client\n    }\n  }\n"]);return L=function(){return e},e}function A(){var e=Object(d.a)(["\n  mutation updateEmail($id: ID, $isRead: Boolean) {\n    updateEmail(id: $id, isRead: $isRead)\n  }\n"]);return A=function(){return e},e}var C=v()(A()),D=v()(L()),$=function(e){var t=e.selectedEmails,n=(e.filter,e.updateEmail);return l.a.createElement(f.a,{onClick:function(){return t.forEach(function(e){var t=e.id;return n({variables:{id:t,isRead:!0}})})},disabled:0===t.length},"Mark ",t.length?t.length:""," as Read")},q=l.a.createElement(f.c,null,l.a.createElement(f.e,null,"Email Client Demo by Jimmy Chan"),l.a.createElement(f.d,null,l.a.createElement("p",null,"Implemented with reactstrap (react + bootstrap), styled-components, and apollo-boost. Apollo client configured for local state management. Mock server using graph-ql + casual-browserify."))),x=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(m.a)(t).call(this,e))).toggle=function(){n.setState({viewEmailId:null})},n.limit=5,n.state={filter:"ALL",viewEmailId:null,page:0},n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(E.Query,{query:D,variables:{filter:this.state.filter}},function(t){var n=t.loading,a=t.error,i=t.data;return n?l.a.createElement("p",null,"Loading..."):a?l.a.createElement("p",null,"Error: ",a.message):l.a.createElement(E.Mutation,{mutation:C,refetchQueries:[{query:D,variables:{filter:e.state.filter}}]},function(t){return l.a.createElement(f.g,null,null!==e.state.viewEmailId&&l.a.createElement(I,{filter:e.state.filter,emailId:e.state.viewEmailId,toggle:function(){t({variables:{id:e.state.viewEmailId,isRead:!0}}),e.toggle()}}),l.a.createElement(f.q,null,l.a.createElement(f.f,{xs:12,sm:6},l.a.createElement(f.c,null,l.a.createElement(f.e,null,"Filter: "),l.a.createElement(f.d,null,l.a.createElement(f.q,null,l.a.createElement(f.f,null,l.a.createElement(S,{value:e.state.filter,values:["ALL","UNREAD","READ"],onChange:function(t){return e.setState({filter:t,page:0})}})),l.a.createElement(f.f,null,l.a.createElement($,{selectedEmails:i.emails.filter(function(e){return e.isSelected}),filter:e.state.filter,updateEmail:t})))))),l.a.createElement(f.f,{xs:12,sm:6},q)),l.a.createElement(f.q,{className:"EmailList"},l.a.createElement(f.f,null,l.a.createElement(f.c,{style:{padding:"1rem"}},i.emails.slice(e.state.page*e.limit,e.state.page*e.limit+e.limit).map(function(t){return l.a.createElement(f.c,{key:t.id},l.a.createElement(f.d,null,l.a.createElement(f.h,{check:!0},l.a.createElement(f.j,{check:!0},l.a.createElement(w,{email:t}),l.a.createElement(h,{email:t,onClick:function(){return e.setState({viewEmailId:t.id})}})))))})))),l.a.createElement(f.q,null,l.a.createElement(f.f,{xs:{size:2,offset:5}},l.a.createElement(R,{page:e.state.page,pages:Math.ceil(i.emails.length/e.limit),onChange:function(t){var n=t.page;return e.setState({page:n})}}))))})})}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(155);var M=n(119),B=n(18),Q=n(254),F=n(138),J=n(77),N=n(68),U=n(76),W=n(134),z=n(136),P=n(69),G=n.n(P),H={emails:Object(N.a)(Array(17).keys()).map(function(e){return{id:G.a.uuid,subject:G.a.sentence,body:G.a.text,isRead:!(e<3)&&G.a.boolean}})},K={Query:{emails:function(e,t){var n=t.filter,a=void 0===n?"ALL":n;return H.emails.filter(function(e){return"ALL"===a||"READ"===a&&e.isRead||"UNREAD"===a&&!e.isRead})},email:function(e,t){var n=t.id;return H.emails.find(function(e){return e.id===n})}},Mutation:{updateEmail:function(e,t){var n=t.id,a=Object(U.a)(t,["id"]),l=H.emails.findIndex(function(e){return e.id===n});return l>=0&&(H.emails=Object(N.a)(H.emails.slice(0,l)).concat([Object(J.a)({},H.emails[l],a)],Object(N.a)(H.emails.slice(l+1)))),H.emails[l]}}},T=Object(W.makeExecutableSchema)({typeDefs:"\n  type Email {\n    id: ID!\n    subject: String!\n    body: String!\n    isRead: Boolean!\n  }\n\n  type Query {\n    emails(filter: String): [Email]!\n    email(id: ID!): Email!\n  }\n\n   type Mutation {\n     updateEmail(id: ID!, isRead: Boolean): Email!\n   }\n",resolvers:K}),V=new z.a({schema:T});function X(){var e=Object(d.a)(["\n  fragment completeEmail on Email {\n    isSelected\n  }\n"]);return X=function(){return e},e}var Y=v()(X()),Z={Email:{isSelected:function(){return!1}},Mutation:{setEmailSelect:function(e,t,n){var a=n.cache,l=t.id,i=t.isSelected,r=(Object(U.a)(t,["id","isSelected"]),Y),c=a.readFragment({fragment:r,id:l}),u=Object(J.a)({},c,{isSelected:i});return a.writeFragment({fragment:r,id:l,data:u}),null}}},_=new Q.a({dataIdFromObject:function(e){return e.id||null}}),ee=Object(F.a)({cache:_,defaults:{filter:"ALL",page:0,viewEmailId:null,selectedEmails:[]},resolvers:Z}),te=B.ApolloLink.from([ee,V]),ne=new M.a({link:te,cache:_});r.a.render(l.a.createElement(E.ApolloProvider,{client:ne},l.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[139,2,1]]]);
//# sourceMappingURL=main.559b56cf.chunk.js.map